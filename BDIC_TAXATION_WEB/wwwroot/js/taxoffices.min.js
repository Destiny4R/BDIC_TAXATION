function blockcallback(){$.blockUI({message:'<div class="bs-spinner mt-4 mt-lg-0"><div class= "spinner-border text-success mr-2 mt-2" style="width: 10rem; height: 10rem;" role="status"><span class="sr-only">Loading...<\/span><\/div> ',fadeIn:800,overlayCSS:{backgroundColor:"#1b2024",opacity:.8,zIndex:1200,cursor:"wait"},css:{border:0,color:"#fff",zIndex:1201,padding:0,backgroundColor:"transparent"},onBlock:function(){}})}function updateButtonState(n){const t=$("#activedeactive"),i=$("#message");n?(t.removeClass("btn-success").addClass("btn-warning"),t.text("Deactivate"),i.val("Are you sure you want Deactivate this Office?")):(t.removeClass("btn-warning").addClass("btn-success"),t.text("Activate"),i.val("Are you sure you want Reactivate this Office?"))}var table=null;$(document).ready(function(){table=$("#taxofficesTable").DataTable({serverSide:!0,processing:!0,searching:!0,paging:!0,info:!0,responsive:!0,ajax:{url:"/view/TaxOfficesViews",type:"POST",dataType:"json"},columns:[{data:null,orderable:!1,searchable:!1,autoWidth:!0,render:function(n,t,i,r){return r.settings._iDisplayStart+r.row+1}},{data:"name",autoWidth:!0},{data:"code",autoWidth:!0},{data:"lga",autoWidth:!0},{data:"status",autoWidth:!0,render:function(n){return n?'<span class="badge badge-success"><i class="fas fa-chevron-down"><\/i> Active<\/span>':'<span class="badge badge-warning"><i class="fas fa-chevron-down"><\/i> Deactivated<\/span>'}},{data:"createdate",autoWidth:!0,render:function(n){if(n!=null){var t=new Date(n).getHours();let i=t>=12?"pm":"am";return n=n.toLocaleString("YYYY-MM-dd").slice(0,19).replace("T"," ")+" "+i}return"null"}},{data:"officerincharge",autoWidth:!0},{data:null,orderable:!1,render:function(n,t,i){return'<button type="button" data-id="'+i.id+'" class="btn btn-secondary btn-sm rounded-5 btn-viewdata" data-bs-target="#manageOfficeModal" data-bs-toggle="modal"><i class="ti-settings" ><\/i> &nbsp; View<\/button> &nbsp;'}}],language:{processing:'<i class="fa fa-spinner fa-spin fa-3x fa-fw"><\/i><span class="sr-only">Loading...<\/span>',lengthMenu:"Show _MENU_ entries",zeroRecords:"No matching records found",info:"Showing _START_ to _END_ of _TOTAL_ entries",infoEmpty:"Showing 0 to 0 of 0 entries",infoFiltered:"(filtered from _MAX_ total entries)",search:"Search:",paginate:{first:'<i class="fas fa-angle-left"><\/i>',last:'<i class="fas fa-angle-right"><\/i>',next:"Next",previous:"Prev"}},initComplete:function(){console.log("Table initialized")}})});$(document).on("click",".delete-btn",function(){var t=$("#caseId").val();const n=Swal.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});n.fire({title:"Are you sure?",text:"You won't be able to recover this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(i=>{i.isConfirmed?$.ajax({type:"DELETE",url:"/v1/DeleteFileTaxOffices/"+t,success:function(t){$.unblockUI();t.success?(n.fire("Deleted!",t.message,"success"),table.ajax.reload(null,!1),$("#manageOfficeModal").modal("hide"),setTimeout(()=>{$("body").removeClass("modal-open"),$(".modal-backdrop").remove()},500)):Swal.fire({icon:"error",title:"Oops...",text:t.message,footer:"Message"})},beforeSend:function(){blockcallback()},error:function(){$.unblockUI();Swal.fire({icon:"error",title:"Oops...",text:"Something went wrong!",footer:"Check internet connectivity"})},complete:function(){$.unblockUI()}}):i.dismiss===Swal.DismissReason.cancel&&n.fire("Cancelled","Tax Office not deleted","error")})});$(document).on("click",".btn-enable-Disable",function(){var t=$("#caseId").val();const i=$("#message").val(),n=Swal.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});n.fire({title:"Are you sure?",text:i,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Execute!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(i=>{i.isConfirmed?$.ajax({type:"POST",url:"/v1/DisableTaxOffice/"+t,success:function(t){$.unblockUI();t.success?(n.fire("Action Result!",t.message,"success"),table.ajax.reload(null,!1),$("#manageOfficeModal").modal("hide"),setTimeout(()=>{$("body").removeClass("modal-open"),$(".modal-backdrop").remove()},500)):Swal.fire({icon:"error",title:"Oops...",text:t.message,footer:"Message"})},beforeSend:function(){blockcallback()},error:function(){$.unblockUI();Swal.fire({icon:"error",title:"Oops...",text:"Something went wrong!",footer:"Check internet connectivity"})},complete:function(){$.unblockUI()}}):i.dismiss===Swal.DismissReason.cancel&&n.fire("Cancelled","Action aborted","error")})});$(document).on("click",".btn-editdata",function(){var n=$("#caseId").val();$.ajax({type:"POST",url:"/v1/GetTaxOfficedata/"+n,success:function(n){if($.unblockUI(),n.success){$("#taxOffice2_Name").val(n.data.name);$("#taxOffice2_code").val(n.data.code);$("#taxOffice2_Address").val(n.data.address);$("#taxOffice2_Phone").val(n.data.phone);$("#taxOffice2_Email").val(n.data.email);$("#taxOffice2_LgaId").val(n.data.lgaId);$("#taxOffice2_OfficerInCharge").val(n.data.officerincharge);$("#taxOffice2_Id").val(n.data.id);const t=new bootstrap.Modal("#editTaxOfficeModal");$("#manageOfficeModal").modal("hide");setTimeout(()=>{$("body").removeClass("modal-open"),$(".modal-backdrop").remove(),t.show()},500)}else Swal.fire({icon:"error",title:"Oops...",text:n.message,footer:"Message"})},beforeSend:function(){blockcallback()},error:function(){$.unblockUI();Swal.fire({icon:"error",title:"Oops...",text:"Something went wrong!",footer:"Check internet connectivity"})},complete:function(){$.unblockUI()}})});$(document).on("click",".btn-viewdata",function(){const n=$(this).data("id");$.ajax({type:"POST",url:"/v1/GetTaxOfficedata/"+n,success:function(n){if($.unblockUI(),n.success){$("#name").text(n.data.name);$("#code").text(n.data.code);$("#address").text(n.data.address);$("#phone").text(n.data.phone);$("#email").text(n.data.email);$("#lga").text(n.data.lga);$("#officer").text(n.data.officerincharge);$("#id").text(n.data.id);var t=new Date(n.data.createdate).getHours();let r=t>=12?"pm":"am",u=n.data.createdate.toLocaleString("YYYY-MM-dd").slice(0,19).replace("T"," ")+" "+r;$("#createdate").text(u);const i=$("#thestatusdiv").empty();n.data.status?i.append('<span class="badge badge-success"><i class="fas fa-check-double"><\/i> Active<\/span>'):i.append('<span class="badge badge-danger"><i class="fas fa-times"><\/i> Deactivated<\/span>');$(".delete-btn").attr("data-id",n.data.id);$(".btn-enable-Disable").attr("data-id",n.data.id);$(".btn-editdata").attr("data-id",n.data.id);$("#caseId").val(n.data.id);updateButtonState(n.data.status);const f=new bootstrap.Modal("#manageOfficeModal");f.show()}else Swal.fire({icon:"error",title:"Oops...",text:n.message,footer:"Message"})},beforeSend:function(){blockcallback()},error:function(){$.unblockUI();Swal.fire({icon:"error",title:"Oops...",text:"Something went wrong!",footer:"Check internet connectivity"})},complete:function(){$.unblockUI()}})});$(".input-mask").inputmask();